/*
    D3.js Slider
    Inspired by jQuery UI Slider
    Copyright (c) 2013, Bjorn Sandvik - http://blog.thematicmapping.org
    BSD license: http://opensource.org/licenses/BSD-3-Clause
*/d3.slider=function(){"use strict";function v(e){e.each(function(){function g(e){typeof o=="boolean"&&(o=d3.svg.axis().ticks(Math.round(d/100)).tickFormat(p).orient(s==="horizontal"?"bottom":"right"));l=f.copy().range([0,d]);o.scale(l);var t=e.append("svg").classed("d3-slider-axis d3-slider-axis-"+o.orient(),!0).on("click",T),n=t.append("g");if(s==="horizontal"){t.style("left",-u);t.attr({width:d+u*2,height:u});if(o.orient()==="top"){t.style("top",-u);n.attr("transform","translate("+u+","+u+")")}else n.attr("transform","translate("+u+",0)")}else{t.style("top",-u);t.attr({width:u,height:d+u*2});if(o.orient()==="left"){t.style("left",-u);n.attr("transform","translate("+u+","+u+")")}else n.attr("transform","translate(0,"+u+")")}n.call(o)}function y(e){var t=b(f.invert(e/d));if(a!==t){var n=h(f(b(a))),r=h(f(b(t))),o=s==="horizontal"?"left":"bottom";c.slide(d3.event.sourceEvent||d3.event,a=t);i?m.transition().styleTween(o,function(){return d3.interpolate(n,r)}).duration(typeof i=="number"?i:250):m.style(o,r)}}function b(e){var t=(e-f.domain()[0])%r,n=e-t;Math.abs(t)*2>=r&&(n+=t>0?r:-r);return n}function w(){y(d3.event.offsetX||d3.event.layerX)}function E(){y(d-d3.event.offsetY||d3.event.layerY)}function S(){y(Math.max(0,Math.min(d,d3.event.x)))}function x(){y(d-Math.max(0,Math.min(d,d3.event.y)))}function T(){d3.event.stopPropagation()}f||(f=d3.scale.linear().domain([t,n]));a=a||f.domain()[0];var e=d3.select(this).classed("d3-slider d3-slider-"+s,!0),v=d3.behavior.drag(),m=e.append("a").classed("d3-slider-handle",!0).attr("xlink:href","#").on("click",T).call(v);if(s==="horizontal"){e.on("click",w);v.on("drag",S);m.style("left",h(f(a)));d=parseInt(e.style("width"),10)}else{e.on("click",E);v.on("drag",x);m.style("bottom",h(f(a)));d=parseInt(e.style("height"),10)}o&&g(e)})}var t=0,n=100,r=1,i=!0,s="horizontal",o=!1,u=50,a,f,l,c=d3.dispatch("slide"),h=d3.format(".2%"),p=d3.format(".0"),d;v.min=function(e){if(!arguments.length)return t;t=e;return v};v.max=function(e){if(!arguments.length)return n;n=e;return v};v.step=function(e){if(!arguments.length)return r;r=e;return v};v.animate=function(e){if(!arguments.length)return i;i=e;return v};v.orientation=function(e){if(!arguments.length)return s;s=e;return v};v.axis=function(e){if(!arguments.length)return o;o=e;return v};v.margin=function(e){if(!arguments.length)return u;u=e;return v};v.value=function(e){if(!arguments.length)return a;a=e;return v};v.scale=function(e){if(!arguments.length)return f;f=e;return v};d3.rebind(v,c,"on");return v};